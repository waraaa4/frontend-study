<!-- promise 활용예제 -->

<!DOCTYPE html>
<html lang="en">

<head>
    <title>promise를 사용하여 회원가입시 아이디 중복 체크하기</title>
    <script src="../js/jquery-3.7.1.min.js"></script>
    <script>
        function func() {
            const promise = new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve(true); // 응답으로 중복여부 받음
                    // reject(new Error("no network"));
                }, 3000);
            });

            // 응답받아서 처리
            promise
                .then((result) => {
                    if (result) {
                        $("p").show();
                        $("#id").focus();
                    } else {
                        $("p").hide();
                        alert('사용가능한 아이디입니다!')
                    }
                })
                .catch((error) => {
                    console.log(error);
                });
        }
    </script>


</head>

<body>
    <h2>회원가입</h2>
    <label for="id">아이디</label>
    <input type="text" id="id" name="id">
    <button onclick="func();">중복체크</button>
    <label for="password">패스워드</label>
    <input type="password" id="password" name="password">
    <p style="color: red; display: none;">아이디가 중복되었습니다!</p>
</body>

</html>